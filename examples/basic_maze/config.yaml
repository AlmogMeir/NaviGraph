verbose: true
experiment_path: .
experiment_output_path: "{PROJECT_ROOT}/output"
system_running_mode: 'analyze'

plugins:
  # Primary pose estimation data (establishes temporal index)
  - name: pose_data
    type: pose_tracking
    file_pattern: '.*DLC.*\.h5$'  # Match DeepLabCut H5 files
    config:
      bodypart: 'Nose'
      likelihood_threshold: 0.3
      bodyparts: 'all'

  # Camera calibration transformation matrix
  - name: calibration_matrix
    type: calibration
    shared: true  # Look in resources folder
    file_pattern: 'transform_matrix\.npy$'
    config: {}

  # Spatial coordinate transformation and tile detection
  - name: map_coords
    type: map_location
    shared: true  # Map is shared across sessions
    file_pattern: '.*maze_map\.png$'  # Match maze map image
    config:
      bodypart: 'Nose'  # Which bodypart to track for map coordinates

  # Graph-based spatial navigation analysis
  - name: graph_coords
    type: graph_location
    shared: true  # Graph is shared across sessions
    config:
      reward_tile_id: 273  # Tile ID for reward location

graph:
  builder:
    type: binary_tree
    config:
      height: 7
  mapping_file: ./resources/graph_mapping.pkl
  conflict_strategy: node_priority

analyze:
  metrics:
    time_to_reward: 
      func_name: 'time_a_to_b'
      args: 
        a: 145
        b: 273
    
    velocity_to_reward:
      func_name: 'velocity_a_to_b'
      args:
        a: 145
        b: 273
    
    exploration_percentage:
      func_name: 'exploration_percentage'

  save_as_csv: true
  save_as_pkl: true
  save_raw_data_as_pkl: true